# 🔧 访问指南

## ⚠️ 重要：正确的访问地址

根据终端输出，前端服务实际运行在：

### ✅ 正确的前端地址
**http://localhost:3005**

（因为端口 3000-3004 已被占用）

---

## 🚀 立即访问

在浏览器中打开：

```
http://localhost:3005
```

---

## 📝 问题说明

### 1. 后端错误信息
如果你访问 `http://127.0.0.1:8545` 看到 JSON-RPC 错误，这是**正常的**！

```json
{"jsonrpc":"2.0","id":null,"error":{"code":-32700,"message":"Parse error"}}
```

**原因**: 
- `http://127.0.0.1:8545` 是 Hardhat 本地节点的 RPC 端点
- 它只接受 JSON-RPC 格式的请求
- 直接在浏览器访问会返回错误，因为浏览器没有发送正确的 JSON-RPC 请求

**这不是问题！** RPC 节点正在正常运行，它只是不能直接在浏览器中访问。

### 2. 端口 3000 无法访问
前端实际运行在 **端口 3005**，因为：
- 端口 3000-3004 已被其他应用占用
- Next.js 自动寻找可用端口并使用 3005

---

## ✅ 正确的使用方式

### 访问前端应用
```
http://localhost:3005
```

### 与智能合约交互

#### 方式 1: 通过前端界面
1. 打开 http://localhost:3005
2. 点击"连接钱包"按钮
3. 在 MetaMask 中连接

#### 方式 2: 通过 Hardhat Console
打开新的终端窗口：
```bash
cd d:\FannieKuku\multisig-deployer
npx hardhat console --network localhost
```

然后在 console 中：
```javascript
// 连接到已部署的合约
const MultiSigWallet = await ethers.getContractFactory("MultiSigWallet")
const wallet = await MultiSigWallet.attach("0x5FbDB2315678afecb367f032d93F642f64180aa3")

// 查看所有者
await wallet.getOwners()

// 查看确认数
await wallet.numConfirmationsRequired()

// 提交交易示例
await wallet.submitTransaction(
  "0x70997970C51812dc3A010C7d01b50e0d17dc79C8", 
  ethers.parseEther("1.0"), 
  "0x"
)
```

---

## 🔗 当前运行的服务

| 服务 | 地址 | 状态 | 说明 |
|------|------|------|------|
| Hardhat 节点 | http://127.0.0.1:8545 | ✅ 运行中 | RPC 节点（不能直接浏览器访问） |
| Next.js 前端 | http://localhost:3005 | ✅ 运行中 | 前端应用界面 |

---

## 🦊 MetaMask 配置

### 添加本地网络

1. 打开 MetaMask
2. 点击网络下拉菜单
3. 选择"添加网络" → "手动添加网络"
4. 填入以下信息：

```
网络名称: Hardhat Local
RPC URL: http://127.0.0.1:8545
Chain ID: 31337
货币符号: ETH
```

5. 保存

### 导入测试账户

导入以下任一账户的私钥（每个账户有 10000 ETH）：

**账户 #0** (已用于部署合约)
```
地址: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
私钥: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

**账户 #1**
```
地址: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
私钥: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d
```

**账户 #2**
```
地址: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
私钥: 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a
```

⚠️ **警告**: 这些私钥是公开的测试私钥，切勿在主网使用！

---

## 🎯 快速测试步骤

### 步骤 1: 访问前端
```
http://localhost:3005
```

### 步骤 2: 配置 MetaMask
- 添加本地网络（Chain ID: 31337）
- 导入测试账户私钥

### 步骤 3: 连接钱包
- 在前端页面点击"连接钱包"
- 选择 MetaMask
- 确保切换到 "Hardhat Local" 网络

### 步骤 4: 开始使用
- 配置多签钱包参数
- 添加所有者地址
- 设置所需确认数
- 部署新的多签钱包

---

## 🐛 故障排查

### 问题 1: 前端页面打不开
**解决方案**: 确保访问 http://localhost:3005（不是 3000）

### 问题 2: MetaMask 连接失败
**检查**:
1. ✅ MetaMask 已添加本地网络（Chain ID: 31337）
2. ✅ 切换到 "Hardhat Local" 网络
3. ✅ Hardhat 节点正在运行

### 问题 3: 交易失败
**可能原因**:
1. 账户余额不足（检查是否导入了测试账户）
2. 网络配置错误（确认 RPC URL 是 http://127.0.0.1:8545）
3. Hardhat 节点未运行

### 问题 4: 看到 "Parse error" 错误
**这是正常的！** 如果你在浏览器直接访问 http://127.0.0.1:8545，会看到这个错误。这不影响使用，因为：
- RPC 节点正在正常工作
- 它只接受 Web3 客户端的 JSON-RPC 请求
- 应该通过前端或 Hardhat Console 与它交互

---

## 🔒 已部署的合约信息

```
网络: localhost
合约地址: 0x5FbDB2315678afecb367f032d93F642f64180aa3
部署者: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
所有者数量: 1
所需确认数: 1
```

---

## 📞 需要帮助？

### 检查服务状态
打开终端查看 Hardhat 节点日志（应该能看到交易和调用记录）

### 查看前端日志
在浏览器中按 F12 打开开发者工具，查看 Console 标签页

### 重启服务
如果遇到问题，可以重启：

1. **停止所有服务** (Ctrl+C)
2. **重新启动 Hardhat 节点**:
   ```bash
   npx hardhat node
   ```
3. **重新部署合约**:
   ```bash
   npx hardhat run scripts/deploy.js --network localhost
   ```
4. **重启前端**:
   ```bash
   npm run dev
   ```

---

## ✨ 开始使用

**现在就访问前端应用：**

```
🌐 http://localhost:3005
```

祝你使用愉快！🚀

